# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer

import random
from pathlib import Path
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage
from vampyro import lista_cla,escolher_nome, escolher_cla, Vampiro,definir_atributos, definir_diciplinas, definir_humanidade, definir_virtudes # Importe funções e classes do vampyro.py

OUTPUT_PATH = Path(__file__).parent  # Diretório onde o script atual está localizado
ASSETS_PATH = OUTPUT_PATH / "assets" / "frame0"  # Caminho relativo para a pasta assets/frame0


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)


# Função para criar o personagem
def criar_personagem():
    nome = entry_1.get().title()  # Obtém o nome do Entry
    cla = entry_2.get().title()  # Obtém o clã do Entry

    # Use as funções do vampyro.py para processar os dados
    if not nome:
        nome = "Indigente"  # Nome padrão
    if not cla:
        cla = random.choice(list(lista_cla.keys()))
        cla = cla# trabalhando aqui
        print(cla)
    elif cla in lista_cla:
        print(cla)
    else:
        print('Verifique a lista de clãs')
        print(list(lista_cla.keys()))
        entry_3.delete("1.0", "end")  # Limpa o Text widget
        entry_3.insert("1.0", f"Verifique a lista de clãs\n")
        entry_3.insert("2.0", f"Clãs disponíveis: {', '.join(lista_cla.keys())}\n")
        entry_3.insert("3.0", f"Ou se preferir um cla aleatorio, deixe em branco.\n")


    # Definir disciplinas com base no clã
    atributos = definir_atributos(cla)  # Definindo os atributos
    disciplinas = definir_diciplinas(cla)  # Agora a função aceita o argumento cla
    virtudes = definir_virtudes()  # Definindo as virtudes
    humanidade = definir_humanidade()  # Definindo a humanidade 

    # Cria um objeto Vampiro
    vampiro = Vampiro(
        nome=nome,
        geracao=13,  # Exemplo de geração
        cla=cla,
        atributos={},  # Exemplo de atributos
        habilidades={},  # Exemplo de habilidades
        vantagens={},  # Exemplo de vantagens
        qualidades_defeitos={},  # Exemplo de qualidades e defeitos
        trilha=None,
        forca_de_vontade=0,  # Exemplo
        pontos_de_sangue="0/10"  # Exemplo
    )

    # Exibe os dados do personagem no Text widget
# Exibe os dados do personagem no Text widget
    entry_3.delete("1.0", "end")  # Limpa o Text widget
    entry_3.insert("1.0", f"Nome: {vampiro.nome}\n")
    entry_3.insert("2.0", f"Clã: {vampiro.cla}\n")
    entry_3.insert("3.0", f"Geração: {vampiro.geracao}\n")
    entry_3.insert("4.0", f"Atributos:\n")
    entry_3.insert("5.0", f"  Físicos: {vampiro.atributos.get('fisicos', {})}\n")
    entry_3.insert("6.0", f"  Sociais: {vampiro.atributos.get('sociais', {})}\n")
    entry_3.insert("7.0", f"  Mentais: {vampiro.atributos.get('mentais', {})}\n")
    entry_3.insert("8.0", f"Habilidades:\n")
    entry_3.insert("9.0", f"  Talentos: {vampiro.habilidades.get('talentos', {})}\n")
    entry_3.insert("10.0", f"  Perícias: {vampiro.habilidades.get('pericias', {})}\n")
    entry_3.insert("11.0", f"  Conhecimentos: {vampiro.habilidades.get('conhecimento', {})}\n")
    entry_3.insert("12.0", f"Vantagens:\n")
    entry_3.insert("13.0", f"  Antecedentes: {vampiro.vantagens.get('antecedentes', {})}\n")
    entry_3.insert("14.0", f"  Virtudes: {vampiro.vantagens.get('virtudes', {})}\n")
    entry_3.insert("15.0", f"Disciplinas: {', '.join(disciplinas)}\n")
    entry_3.insert("16.0", f"Qualidades e Defeitos: {vampiro.qualidades_defeitos}\n")
    entry_3.insert("17.0", f"Humanidade: {humanidade}\n")
    entry_3.insert("18.0", f"Força de Vontade: {vampiro.forca_de_vontade}\n")
    entry_3.insert("19.0", f"Pontos de Sangue: {vampiro.pontos_de_sangue}\n")
    entry_3.insert("20.0", "Ficha gerada com sucesso!")

# Configuração da janela principal
window = Tk()
window.geometry("845x480")
window.configure(bg="#292929")

canvas = Canvas(
    window,
    bg="#292929",
    height=480,
    width=845,
    bd=0,
    highlightthickness=0,
    relief="ridge"
)

canvas.place(x=0, y=0)
canvas.create_rectangle(
    0.0,
    0.0,
    845.0,
    58.0,
    fill="#500B0B",
    outline=""
)

canvas.create_text(
    729.0,
    10.0,
    anchor="nw",
    text="Créditos",
    fill="#BC0000",
    font=("Inter SemiBoldItalic", 10 * -1)
)

canvas.create_text(
    21.0,
    8.0,
    anchor="nw",
    text="VamPYro",
    fill="#CDCDCD",
    font=("Inter SemiBoldItalic", 24 * -1)
)

canvas.create_text(
    21.0,
    77.0,
    anchor="nw",
    text="Nome",
    fill="#FFFFFF",
    font=("Inter SemiBoldItalic", 15 * -1)
)

canvas.create_text(
    21.0,
    165.0,
    anchor="nw",
    text="Clã",
    fill="#FFFFFF",
    font=("Inter SemiBoldItalic", 15 * -1)
)

entry_image_1 = PhotoImage(
    file=relative_to_assets("entry_1.png"))
entry_bg_1 = canvas.create_image(
    95.0,
    121.0,
    image=entry_image_1
)
entry_1 = Entry(
    bd=0,
    bg="#D9D9D9",
    fg="#000716",
    highlightthickness=0
)
entry_1.place(
    x=21.0,
    y=102.0,
    width=148.0,
    height=36.0
)

entry_image_2 = PhotoImage(
    file=relative_to_assets("entry_2.png"))
entry_bg_2 = canvas.create_image(
    95.0,
    227.0,
    image=entry_image_2
)
entry_2 = Entry(
    bd=0,
    bg="#D9D9D9",
    fg="#000716",
    highlightthickness=0
)
entry_2.place(
    x=21.0,
    y=208.0,
    width=148.0,
    height=36.0
)

entry_image_3 = PhotoImage(
    file=relative_to_assets("entry_3.png"))
entry_bg_3 = canvas.create_image(
    515.0,
    264.0,
    image=entry_image_3
)
entry_3 = Text(
    bd=0,
    bg="#D9D9D9",
    fg="#000716",
    highlightthickness=0
)
entry_3.place(
    x=283.0,
    y=61.0,
    width=464.0,
    height=404.0
)

button_image_1 = PhotoImage(
    file=relative_to_assets("button_1.png"))
button_1 = Button(
    image=button_image_1,
    borderwidth=0,
    highlightthickness=0,
    command=criar_personagem,  # Chama a função criar_personagem
    relief="flat"
)
button_1.place(
    x=44.0,
    y=271.0,
    width=77.0,
    height=23.0
)

button_image_2 = PhotoImage(
    file=relative_to_assets("button_2.png"))
button_2 = Button(
    image=button_image_2,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: print("button_2 clicked"),
    relief="flat"
)
button_2.place(
    x=757.0,
    y=444.0,
    width=77.0,
    height=23.0
)

window.resizable(False, False)
window.mainloop()
